<div class="mb-2 row" ng-hide="getActiveRepository() && !isRestricted">
    <div role="alert">
        <div class="mb-1 mt-1 ml-1 mr-1">
            <div class="card repository-errors">
                <div class="alert alert-warning lead">
                    <div ng-if="!getActiveRepository()" >{{'core_errors.no.connected.repository.warning.msg' | translate}}</div>
                    <div id="restrictedDiv" ng-if="getActiveRepository() && isRestricted">{{'core_errors.restricted.warning.msg' | translate}}
                        <span ng-if="!isLicenseValid()">{{'core_errors.not.valid.license.warning.msg' | translate}}
                            <p></p>
                            <div><a href="license" class="btn btn-primary confirm-btn">{{'core_errors.set.new.license.warning.msg' | translate}}</a></div>
                        </span>
                        <span ng-if="isSecurityEnabled() && !canWriteActiveRepo()">{{'core_errors.no.permission.to.repository.warning.msg' | translate}}</span>
                        <strong ng-if="isActiveRepoOntopType()">{{getActiveRepository()}}</strong>
                        <span ng-if="canWriteActiveRepo() && isActiveRepoOntopType()">{{'core_errors.read.only.repository.warning.msg' | translate}}</span>
                        <span ng-if="canWriteActiveRepo() && isActiveRepoFedXType()"> <b>{{title | translate}}</b>{{'core_errors.fedx.repository.warning.msg' | translate}}</span></div>
                    <small>
                        <span ng-if="getAccessibleRepositories().length && isLicenseValid()">
                            {{'core_errors.select.repository.warning.msg' | translate}}<span ng-if="canManageRepositories()">{{'core_errors.or.create.repository.warning.msg' | translate}}</span>.
                        </span>

                        <span ng-hide="getAccessibleRepositories().length">
                            {{'core_errors.no.accessible.warning.msg' | translate}}<span ng-if="isRestricted">{{'core_errors.writable' | translate}}
                        </span>{{'core_errors.repositories' | translate}}<span ng-if="canManageRepositories()">{{'core_errors.create.repository.warning.msg' | translate}}</span>.
                        </span>
                    </small>
                </div>

                <ul class="list-group limit-height clearfix two-columns repos" ng-mouseleave="hidePopoverForRepo($event)">
                    <li ng-repeat="repository in getAccessibleRepositories() | orderBy: ['type === \'system\'', 'id']"
                        ng-if="repository.id !== getActiveRepository()"
                        class="list-group-item list-group-item-action repository"
                        ng-mouseenter="showPopoverForRepo($event, repository)" ngx-mouseleave="setPopoverForRepo($event, repository, false)">
                        <div class="lead ellipsis-block" ng-click="setRepository(repository.id)">
                            <span class="popover-anchor"
                                  popover-popup-delay="500"
                                  popover-trigger="show" popover-placement="{{$index % 2 === 0 ? 'bottom-right' : 'left-bottom'}}"
                                  popover-template="popoverTemplate" popover-title="Repository {{repository.id}}">
                            <em class="icon-lg" ng-class="'icon-repo-' + repository.type"></em>
                            <strong>{{repository.id}}</strong></span><small ng-show="repository.title"><span class="small"> &middot; {{repository.title}}</span></small>
                        </div>
                    </li>
                </ul>

                <div class="pull-right" ng-if="isLicenseValid() && canManageRepositories()">
                    <button class="btn btn-link px-0 create-repository-btn" ng-click="goToAddRepo()">
                        <span class="icon-plus"></span> {{ 'core_errors.repository.create.btn' | translate }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

